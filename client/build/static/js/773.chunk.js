(self.webpackChunkPFT_client=self.webpackChunkPFT_client||[]).push([[773],{6773:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>x});var o=n(7294),r=n(7703),a=n(7746),l=n(5858),c=(t=n(9081),n.n(t)),u=n(3935);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(r,o.Component);var e,t,n=(e=r,t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var n=p(e),o=t?(o=p(this).constructor,Reflect.construct(n,arguments,o)):n.apply(this,arguments);return n=this,!o||"object"!==i(o)&&"function"!=typeof o?function(){if(void 0!==n)return n;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():o});function r(e){return function(e){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this),(e=n.call(this,e)).root=document.createElement("div"),e}return function(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}(r.prototype,[{key:"componentDidMount",value:function(){document.body.appendChild(this.root),document.body.style.overflow="hidden"}},{key:"componentWillUnmount",value:function(){document.body.removeChild(this.root),document.body.style.overflow="auto"}},{key:"render",value:function(){return u.createPortal(o.createElement("div",{className:"overlay"},o.createElement("div",{className:"overlay__background",onClick:this.props.modalClose}),o.createElement("div",{className:"overlay__wrapper"},o.createElement("h2",{className:"overlay__wrapper__title"},this.props.title),this.props.children)),this.root)}}]),r}();function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e){e.add;var t=e.teachers;return e=e.placeholder,o.createElement("div",{className:"content_block_input"},o.createElement("label",null,"Группа",o.createElement("input",(m(e={type:"text",name:"title",autoComplete:"off",placeholder:e},"autoComplete","off"),m(e,"required",!0),e))),o.createElement("label",null,o.createElement("select",{type:"text",name:"teach",className:"form-control",placeholder:"Введите преподавателя...",defaultValue:"null",required:!0},o.createElement("option",{value:"null",disabled:!0},"Введите преподавателя"),t?t.map((function(e,t){return o.createElement("option",{key:t,value:e._id},e.surname," - ",e._id)})):" not found teachers")),o.createElement("span",null,o.createElement("button",{className:"btn btn-success overlay_btn overlay_btn__save",id:"addTask"},"Добавить")))}var y=n(9249),b=(t=n(4975),n.n(t)),h=n(199),v=n(6567),g=n(5421),E=n(76),_=n(7557),O=n(3920);function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e,t){var n,o=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)),o}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){I(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(r,o.Component);var e,t,n=(e=r,t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var n=T(e),o=t?(o=T(this).constructor,Reflect.construct(n,arguments,o)):n.apply(this,arguments);return n=this,!o||"object"!==C(o)&&"function"!=typeof o?S(n):o});function r(){var e;!function(e){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this);for(var t=arguments.length,a=Array(t),l=0;l<t;l++)a[l]=arguments[l];return I(S(e=n.call.apply(n,[this].concat(a))),"state",{priorityIsOpen:null,sortMethod:null,modalIsEdit:!1,modalIsCreate:!1,loading:!0,globalFilter:"",selectedGroup:"",currentGroup:{_id:"",title:"",executor:""}}),I(S(e),"modalOpen",(function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;switch(t){case"edit":e.setState({modalIsEdit:!0,currentGroup:{_id:n,title:o,executor:r}});break;case"create":e.setState({modalIsCreate:!0});break;default:return 0}})),I(S(e),"modalClose",(function(){e.setState({modalIsEdit:!1,modalIsCreate:!1})})),I(S(e),"addGroup",(function(t){t.preventDefault();var n=t.target.title.value,o=t.target.teach.value;if(""==n||"null"==o)return y.Am.error("Группа не добавлена, заполните поля!",{position:y.Am.POSITION.TOP_RIGHT,autoClose:5e3}),0;console.log(n,"titleGroup"),console.log(o,"teacherSelect"),e.props.addGroup(n,o),y.Am.success("Группа добавлена!",{position:y.Am.POSITION.TOP_RIGHT,autoClose:5e3}),t.target.title.value="",t.target.teach.value="null",e.modalClose()})),I(S(e),"deletesGroup",(function(t,n){(0,O.confirmPopup)({target:n.currentTarget,message:"Удалить?",icon:"pi pi-exclamation-triangle",accept:function(){console.log("deletesGroup",t),t.filter((function(t){e.props.deleteGroup(t._id),y.Am.warn("Группа ".concat(t.name," удалена!"),{position:y.Am.POSITION.TOP_RIGHT,autoClose:3e3})})),e.setState({selectedGroup:"",modalIsEdit:!1})},reject:function(){return 0}})})),I(S(e),"titleChange",(function(t){t.preventDefault();var n=e.state.currentGroup._id,o=e.state.currentGroup.title,r=e.state.currentGroup.executor;console.log(n,o,r),t={name:t.target.title.value,teacherID:t.target.editTeach.value},console.log(t,"data"),(t.name&&t.name!=o||t.teacherID&&t.teacherID!=r)&&(e.props.updateGroup(n,t),y.Am.success("Группа изменена!",{position:y.Am.POSITION.TOP_RIGHT,autoClose:5e3})),e.setState({modalIsEdit:!1})})),I(S(e),"editIconTemplate",(function(t){return o.createElement(o.Fragment,null,o.createElement(E.Button,{icon:"pi pi-pencil",className:"p-button-rounded p-button-success p-mr-2",onClick:function(){e.modalOpen("edit",t._id,t.name,t.teacherID)}}))})),I(S(e),"leftToolbarTemplate",(function(){return o.createElement(o.Fragment,null,o.createElement(E.Button,{label:"New",icon:"pi pi-plus",className:"p-button-success p-mr-2",onClick:function(){e.modalOpen("create")}}),o.createElement(E.Button,{label:"Delete",icon:"pi pi-trash",className:"p-button-danger",onClick:e.deletesGroup.bind(S(e),e.state.selectedGroup),disabled:!e.state.selectedGroup||!e.state.selectedGroup.length}))})),I(S(e),"rightToolbarTemplate",(function(){return o.createElement(o.Fragment,null,o.createElement(E.Button,{label:"Import",icon:"pi pi-upload",className:"p-button-help"}),o.createElement(E.Button,{label:"Export",icon:"pi pi-upload",className:"p-mr-2 p-d-inline-block"}))})),I(S(e),"brutforce",(function(e,t){var n=[];return e.filter((function(e){t.filter((function(t){e.teacherID==t._id&&(t=w(w({},e),t),n.push(t))}))})),n})),e}return function(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}(r.prototype,[{key:"render",value:function(){var e=this,t=(l=this.props).group,n=l.teachers,r=t;console.log(r,"grISteach");var a=(u=this.state).currentGroup,l=u.globalFilter,u=u.selectedGroup;return o.createElement(o.Fragment,null,o.createElement(y.Ix,null),o.createElement("div",null,o.createElement("div",{className:"card"},o.createElement(_.Toolbar,{className:"p-mb-4",left:this.leftToolbarTemplate}),o.createElement("div",{className:"table-header"},o.createElement("h5",{className:"p-m-0"},"Manage Products"),o.createElement("span",{className:"p-input-icon-left"},o.createElement("i",{className:"pi pi-search"}),o.createElement(h.InputText,{type:"search",onInput:function(t){return e.setState({globalFilter:t.target.value})},placeholder:"Global Search"}))),o.createElement(c(),{transitionName:"fadeIn",transitionEnterTimeout:400,transitionLeaveTimeout:200},o.createElement(v.DataTable,{value:r,sortMode:"multiple",globalFilter:l,emptyMessage:"Записей не создано",selection:u,onSelectionChange:function(t){return e.setState({selectedGroup:t.value})},loading:b()(t)},o.createElement(g.Column,{selectionMode:"multiple",headerStyle:{width:"3em"}}),o.createElement(g.Column,{field:"name",header:"Название",sortable:!0}),o.createElement(g.Column,{field:"surname",header:"Учитель",sortable:!0}),o.createElement(g.Column,{body:this.editIconTemplate})))),this.state.modalIsEdit&&o.createElement(f,{title:"Редактировать группу",modalClose:this.modalClose},o.createElement("form",{onSubmit:this.titleChange},o.createElement("label",null,"Группа",o.createElement("input",{type:"text",name:"title",autoComplete:"off",defaultValue:a.title})),o.createElement("label",null,o.createElement("select",{type:"text",name:"editTeach",className:"form-control",placeholder:"Введите преподавателя...",defaultValue:a.executor,required:!0},o.createElement("option",{value:"null",disabled:!0},"Введите преподавателя"),n?n.map((function(e,t){return o.createElement("option",{key:t,value:e._id},e.surname," - ",e._id)})):" not found teachers")),o.createElement("button",{type:"button",onClick:this.modalClose,className:"btn btn-dark overlay_btn overlay_btn__close"},"Закрыть"),o.createElement("button",{type:"button",onClick:this.deletesGroup.bind(this,[a]),className:"btn btn-danger overlay_btn overlay_btn__delete"},"Удалить"),o.createElement("button",{type:"submit",className:"btn btn-success overlay_btn overlay_btn__save"},"Сохранить"))),this.state.modalIsCreate&&o.createElement(f,{title:"Добавить группу",modalClose:this.modalClose},o.createElement("form",{onSubmit:this.addGroup},o.createElement(d,{teachers:n,placeholder:"Добавить группу..."}),o.createElement("button",{type:"button",className:"btn btn-dark overlay_btn overlay_btn__save",onClick:this.modalClose},"Закрыть")))))}}]),r}();var G=(0,r.$j)((function(e){return{groups:e.group.groups}}),(function(e){return{updateGroup:function(t,n){return e((0,a.mD)(t,n))},deleteGroup:function(t){return e((0,a.iE)(t))},addGroup:function(t,n){return e((0,a.Rp)(t,n))}}}))(n);function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(r,o.Component);var e,t,n=(e=r,t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var n=R(e),o=t?(o=R(this).constructor,Reflect.construct(n,arguments,o)):n.apply(this,arguments);return n=this,!o||"object"!==k(o)&&"function"!=typeof o?function(){if(void 0!==n)return n;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():o});function r(){return function(e){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this),n.apply(this,arguments)}return function(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}(r.prototype,[{key:"componentDidMount",value:function(){this.props.loadGroup(),this.props.loadTeacher()}},{key:"render",value:function(){var e=this.props.teachers,t=this.props.groups;return o.createElement("div",null,o.createElement(G,{group:t,teachers:e}))}}]),r}();const x=(0,r.$j)((function(e){return{groups:e.group.groups,teachers:e.helper.teachers}}),(function(e){return{loadGroup:function(){return e((0,a.uA)())},loadTeacher:function(){return e((0,l.mS)())}}}))(n)},7746:(e,t,n)=>{"use strict";n.d(t,{uA:()=>l,mD:()=>c,Rp:()=>u,iE:()=>i});var o=n(45),r=(t=n(9669),n.n(t)),a=n(1436),l=function(){return function(e,t){r().get("/api/group/").then((function(t){t.data&&e({type:o.IP,payload:t.data})})).catch((function(t){e({type:o.Cg,payload:t}),e((0,a.jW)(t))}))}},c=function(e,t){return function(n,l){r().put("/api/group/".concat(e),t).then((function(e){e.data.success&&n({type:o.t3,payload:e.data})})).catch((function(e){n({type:o.Cg,payload:e}),n((0,a.jW)(e))}))}},u=function(e,t){return function(n,l){console.log("добавлена группа"),r().post("/api/group",{name:e,teacherID:t}).then((function(r){e&&t&&n({type:o.Po,payload:r.data})})).catch((function(e){n({type:o.Cg,payload:e}),n((0,a.jW)(e))}))}},i=function(e){return function(t,n){r().delete("/api/group/".concat(e)).then((function(e){e.data.success&&t({type:o.iP,payload:e.data})})).catch((function(e){t({type:o.Cg,payload:e}),t((0,a.jW)(e))}))}}}}]);