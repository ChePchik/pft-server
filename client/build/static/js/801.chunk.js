(self.webpackChunkPFT_client=self.webpackChunkPFT_client||[]).push([[801],{8623:(e,t,n)=>{"use strict";n.d(t,{uA:()=>l,mD:()=>c,Rp:()=>u,iE:()=>i});var o=n(5962),r=(t=n(9669),n.n(t)),a=n(9853),l=function(){return function(e,t){r().get("/api/group/").then((function(t){t.data&&e({type:o.IP,payload:t.data})})).catch((function(t){e({type:o.Cg,payload:t}),e((0,a.jW)(t))}))}},c=function(e,t){return function(n,l){r().put("/api/group/".concat(e),t).then((function(e){e.data.success&&n({type:o.t3,payload:e.data})})).catch((function(e){n({type:o.Cg,payload:e}),n((0,a.jW)(e))}))}},u=function(e,t){return function(n,l){r().post("/api/group",{name:e,teacherID:t}).then((function(r){e&&t&&n({type:o.Po,payload:r.data})})).catch((function(e){n({type:o.Cg,payload:e}),n((0,a.jW)(e))}))}},i=function(e){return function(t,n){r().delete("/api/group/".concat(e)).then((function(e){e.data.success&&t({type:o.iP,payload:e.data})})).catch((function(e){t({type:o.Cg,payload:e}),t((0,a.jW)(e))}))}}},6801:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>k});var o=n(7294),r=n(7703),a=n(8623),l=n(1657),c=(t=n(9081),n.n(t)),u=n(3935);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(r,o.Component);var e,t,n=(e=r,t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var n=p(e),o=t?(o=p(this).constructor,Reflect.construct(n,arguments,o)):n.apply(this,arguments);return n=this,!o||"object"!==i(o)&&"function"!=typeof o?function(){if(void 0!==n)return n;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():o});function r(e){return function(e){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this),(e=n.call(this,e)).root=document.createElement("div"),e}return function(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}(r.prototype,[{key:"componentDidMount",value:function(){document.body.appendChild(this.root),document.body.style.overflow="hidden"}},{key:"componentWillUnmount",value:function(){document.body.removeChild(this.root),document.body.style.overflow="auto"}},{key:"render",value:function(){return u.createPortal(o.createElement("div",{className:"overlay"},o.createElement("div",{className:"overlay__background",onClick:this.props.modalClose}),o.createElement("div",{className:"overlay__wrapper"},o.createElement("h2",{className:"overlay__wrapper__title"},this.props.title),this.props.children)),this.root)}}]),r}();function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e){e.add;var t=e.teachers;return e=e.placeholder,o.createElement("div",{className:"content_block_input"},o.createElement("label",null,"Группа",o.createElement("input",(m(e={type:"text",name:"title",autoComplete:"off",placeholder:e},"autoComplete","off"),m(e,"required",!0),e))),o.createElement("label",null,o.createElement("select",{type:"text",name:"teach",className:"form-control",placeholder:"Введите преподавателя...",defaultValue:"null",required:!0},o.createElement("option",{value:"null",disabled:!0},"Введите преподавателя"),t?t.map((function(e,t){return o.createElement("option",{key:t,value:e.id},e.surname," - ",e.id)})):" not found teachers")),o.createElement("span",null,o.createElement("button",{className:"btn btn-success overlay_btn overlay_btn__save",id:"addTask"},"Добавить")))}var y=n(9249),b=(n(5290),t=n(4975),n.n(t)),h=n(199),v=n(6567),E=n(5421),g=n(76),_=n(7557);function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function I(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(5917),n(3210),n=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(r,o.Component);var e,t,n=(e=r,t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var n=w(e),o=t?(o=w(this).constructor,Reflect.construct(n,arguments,o)):n.apply(this,arguments);return n=this,!o||"object"!==O(o)&&"function"!=typeof o?I(n):o});function r(){var e;!function(e){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this);for(var t=arguments.length,a=Array(t),l=0;l<t;l++)a[l]=arguments[l];return T(I(e=n.call.apply(n,[this].concat(a))),"state",{priorityIsOpen:null,sortMethod:null,modalIsEdit:!1,modalIsCreate:!1,loading:!0,globalFilter:"",selectedGroup:"",currentGroup:{_id:"",title:"",executor:""}}),T(I(e),"modalOpen",(function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;switch(t){case"edit":e.setState({modalIsEdit:!0,currentGroup:{_id:n,title:o,executor:r}});break;case"create":e.setState({modalIsCreate:!0});break;default:return 0}})),T(I(e),"modalClose",(function(){e.setState({modalIsEdit:!1,modalIsCreate:!1})})),T(I(e),"addGroup",(function(t){t.preventDefault();var n=t.target.title.value,o=t.target.teach.value;if(""==n||"null"==o)return y.Am.error("Группа не добавлена, заполните поля!",{position:y.Am.POSITION.TOP_RIGHT,autoClose:5e3}),0;e.props.addGroup(n,o),t.target.title.value="",t.target.teach.value="null",e.modalClose(),y.Am.success("Группа добавлена!",{position:y.Am.POSITION.TOP_RIGHT,autoClose:5e3})})),T(I(e),"deletesGroup",(function(t){t.filter((function(t){e.props.deleteGroup(t._id),y.Am.warn("Группа ".concat(t.name," удалена!"),{position:y.Am.POSITION.TOP_RIGHT,autoClose:3e3})})),e.setState({selectedGroup:"",modalIsEdit:!1})})),T(I(e),"titleChange",(function(t){t.preventDefault();var n=e.state.currentGroup._id,o=e.state.currentGroup.title,r=e.state.currentGroup.executor;((t={name:t.target.title.value,teacherID:t.target.executor.value}).name&&t.name!=o||t.teacherID&&t.teacherID!=r)&&(e.props.updateGroup(n,t),y.Am.success("Группа изменена!",{position:y.Am.POSITION.TOP_RIGHT,autoClose:5e3})),e.setState({modalIsEdit:!1})})),T(I(e),"editIconTemplate",(function(t){return o.createElement(o.Fragment,null,o.createElement(g.Button,{icon:"pi pi-pencil",className:"p-button-rounded p-button-success p-mr-2",onClick:function(){e.modalOpen("edit",t._id,t.name,t.teacherID)}}))})),T(I(e),"leftToolbarTemplate",(function(){return o.createElement(o.Fragment,null,o.createElement(g.Button,{label:"New",icon:"pi pi-plus",className:"p-button-success p-mr-2",onClick:function(){e.modalOpen("create")}}),o.createElement(g.Button,{label:"Delete",icon:"pi pi-trash",className:"p-button-danger",onClick:e.deletesGroup.bind(I(e),e.state.selectedGroup),disabled:!e.state.selectedGroup||!e.state.selectedGroup.length}))})),T(I(e),"rightToolbarTemplate",(function(){return o.createElement(o.Fragment,null,o.createElement(g.Button,{label:"Import",icon:"pi pi-upload",className:"p-button-help"}),o.createElement(g.Button,{label:"Export",icon:"pi pi-upload",className:"p-mr-2 p-d-inline-block"}))})),e}return function(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}(r.prototype,[{key:"render",value:function(){var e=this,t=(a=this.props).group,n=a.teachers,r=(l=this.state).currentGroup,a=l.globalFilter,l=l.selectedGroup;return console.log(n,"teachers"),console.log(r,"currentGroup"),o.createElement(o.Fragment,null,o.createElement(y.Ix,null),o.createElement("div",null,o.createElement("div",{className:"card"},o.createElement(_.Toolbar,{className:"p-mb-4",left:this.leftToolbarTemplate}),o.createElement("div",{className:"table-header"},o.createElement("h5",{className:"p-m-0"},"Manage Products"),o.createElement("span",{className:"p-input-icon-left"},o.createElement("i",{className:"pi pi-search"}),o.createElement(h.InputText,{type:"search",onInput:function(t){return e.setState({globalFilter:t.target.value})},placeholder:"Global Search"}))),o.createElement(c(),{transitionName:"fadeIn",transitionEnterTimeout:400,transitionLeaveTimeout:200},o.createElement(v.DataTable,{value:t,sortMode:"multiple",globalFilter:a,emptyMessage:"No found.",selection:l,onSelectionChange:function(t){return e.setState({selectedGroup:t.value})},loading:b()(t)},o.createElement(E.Column,{selectionMode:"multiple",headerStyle:{width:"3em"}}),o.createElement(E.Column,{field:"_id",header:"_id",sortable:!0}),o.createElement(E.Column,{field:"teacherID",header:"teacherID",sortable:!0}),o.createElement(E.Column,{field:"name",header:"name",sortable:!0}),o.createElement(E.Column,{body:this.editIconTemplate})))),this.state.modalIsEdit&&o.createElement(f,{title:"Редактировать группу",modalClose:this.modalClose},o.createElement("form",{onSubmit:this.titleChange},o.createElement("label",null,"Группа",o.createElement("input",{type:"text",name:"title",autoComplete:"off",defaultValue:r.title})),o.createElement("label",null,"Преподаватель",o.createElement("input",{type:"text",name:"executor",autoComplete:"off",defaultValue:r.executor})),o.createElement("button",{type:"button",onClick:this.modalClose,className:"btn btn-dark overlay_btn overlay_btn__close"},"Закрыть"),o.createElement("button",{type:"button",onClick:this.deletesGroup.bind(this,[r]),className:"btn btn-danger overlay_btn overlay_btn__delete"},"Удалить"),o.createElement("button",{type:"submit",className:"btn btn-success overlay_btn overlay_btn__save"},"Сохранить"))),this.state.modalIsCreate&&o.createElement(f,{title:"Добавить группу",modalClose:this.modalClose},o.createElement("form",{onSubmit:this.addGroup},o.createElement(d,{teachers:n,placeholder:"Добавить группу..."}),o.createElement("button",{type:"button",className:"btn btn-dark overlay_btn overlay_btn__save",onClick:this.modalClose},"Закрыть")))))}}]),r}();var P=(0,r.$j)((function(e){return{groups:e.group.groups}}),(function(e){return{updateGroup:function(t,n){return e((0,a.mD)(t,n))},deleteGroup:function(t){return e((0,a.iE)(t))},addGroup:function(t,n){return e((0,a.Rp)(t,n))}}}))(n);function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function G(e,t){return(G=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&G(e,t)}(r,o.Component);var e,t,n=(e=r,t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var n=j(e),o=t?(o=j(this).constructor,Reflect.construct(n,arguments,o)):n.apply(this,arguments);return n=this,!o||"object"!==S(o)&&"function"!=typeof o?function(){if(void 0!==n)return n;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():o});function r(){return function(e){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this),n.apply(this,arguments)}return function(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}(r.prototype,[{key:"componentDidMount",value:function(){this.props.loadGroup(),this.props.loadTeacher()}},{key:"render",value:function(){var e=this.props.teachers,t=this.props.groups;return o.createElement("div",null,o.createElement(P,{group:t,teachers:e}))}}]),r}();const k=(0,r.$j)((function(e){return{groups:e.group.groups,teachers:e.helper.teachers}}),(function(e){return{loadGroup:function(){return e((0,a.uA)())},loadTeacher:function(){return e((0,l.m)())}}}))(n)}}]);